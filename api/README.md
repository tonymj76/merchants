# RESTful API For Merchant Service

This is an Implementation of REST behind the API using [Gin](https://github.com/gin-gonic/gin)

## Getting Started

### Run the Merchant Service

cd to the merchant service root folder

```
$ go run main.go
```

### Run the Micro API

```
$ micro api --handler=proxy
```

### Run the Merchant Gin API
NOTE: when using mdns, ports is always auto generated by micro... make sure you change port in the url for curl
to work well
#### Gin
```
$ go run api/main.go
Listening on [::]:64738
```

### Curl the Merchant API
make sure you cd in the root dir to locate merchant.json file

Test the CreateMerchant
```
curl -X POST -H "Content-Type: application/json" -d @merchant.json http://localhost:52225/api/v1/merchants/

{"Message":true,"Success":"successful"}
```

Test the ListMerchants
```
curl http://localhost:59243/api/v1/merchants/

{"Message":[{"id":1,"number_of_product":343,"role":1,"email":"merchanst@gmail.com","phone":{"number":"040328844423","type":1},"user_id":2334,"number_of_outlet":343,"business_name":"mercshant","created_at":{"seconds":1590539007,"nanos":265200000},"updated_at":{"seconds":1590539007,"nanos":265200000},"last_login":{"seconds":1590539007,"nanos":265200000}}],"Success":"successful"}
```

### Curl the Outlet API
make sure you cd in the root dir to locate outlet.json file

Test the CreateOutlet
```
curl -X POST -H "Content-Type: application/json" -d @outlet.json http://localhost:52225/api/v1/outlets/

{"Message":true,"Success":"successful"}
```

Test the GetOutlets
```
curl http://localhost:59243/api/v1/outlets/1

{"Message":[{"id":1,"merchant_id":1,"latitude":3435,"longitude":5645,"phone":{"number":"04032884423","type":2},"available":true,"city_id":34,"country_id":3,"address":"some address","position":1,"created_at":{"seconds":1591229287,"nanos":211126000},"updated_at":{"seconds":1591229287,"nanos":211126000}}],"Success":"successful"}
```

### Curl the terminal API
make sure you cd in the root dir to locate terminal.json file

Test the CreateTerminal
```
curl -X POST -H "Content-Type: application/json" -d @terminal.json http://localhost:52225/api/v1/terminals/

{"Message":true,"Success":"successful"}
```

Test the GetTerminals
```
curl http://localhost:59243/api/v1/terminals/1

{"Message":[{"id":1,"merchant_id":1,"user_id":3432,"outlet_id":1,"name":"terminal - 01","created_at":{"seconds":1591229391,"nanos":524349000},"updated_at":{"seconds":1591229391,"nanos":524349000}}],"Success":"successful"}
```
